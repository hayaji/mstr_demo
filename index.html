<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <title>MicroStrategy Embedded Dossier</title>
    <script
      type="text/javascript"
      src="https://report.diasteknoloji.com/MicroStrategyLibrary/javascript/embeddinglib.js"
    ></script>

    <script>
      // üîê Test i√ßin kullanƒ±lan √∂rnek Identity Token
      window.identityToken = "eyJhbGciOiJIUzUxMiIsInppcCI6IkRFRiJ9.eNo80smyojAAQNF_Yf2oYgqBruoFEOMDRBkFsqGQWcCBIIqv-t_b3vT2bO_9YejM_GLeaVj0bMeW1cWIuqGtJvbGpusbtFd1cQvn5Mp5vAbQNiX2nG0Sl4b3wDZfSpaOGr_W9U3t5Nt7f6Fh0MruRXiFFt2wzZZ6QanxJcHkNKZg5R4AyU0yCd1BHqbuSUPqobDTMzNpmkSgul7yEWFF138GIEr0Rr7spmo7sCbvYp1DzsDfOsc_HmLO4tHO20gUyWrgjIcwUx9GfVKgtWvJ8fRqjJTgqC5Wa9bmfJz0g_D25auWnaeifucTXJRuwZy1mzHPctBpLqbk5j3JnG9_vJZI9wZIfIBJcKjOah8Cm6hxHEbe3aqm-axNZzBE5e7tKGQ1cdLY7txXNSkcTLXVneI6iY7HcZBtPeY1YsT7MvR7iUuMFwp3d5lnh1pCqUdUtDkY8NrmQ7BXnn5pF2O2FZK1OC4pGwBxxLe1Ne85LNJvx11LgJYukPoFVlcnjWPag5SccRWp8OhzmfQw5rbwi327EM9iqTSq3T4XlHKiul0ZjYGk38wX0-Wf6DyUgAgETlG_mOp1-w_iP6CP02cLA3HoY6IkihyGYIOQoalIgViHWJAxx_z5CwAA__8.qgIrRtmY2kWpK5rL92agv7qC34zwlZ8wjFkiVUlSQRzKkmrXO20HctkgPfO89z6YAUpGj_1rAXWv_ZoxA6cZnQ";
    </script>
  </head>
  <body>
    <div>Embed Alanƒ±:</div>
    <div id="mydossier" style="border: 1px solid #ccc; margin-top: 10px;"></div>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        if (!window.identityToken) {
          alert("‚ùå Identity token bulunamadƒ±!");
          return;
        }

        console.log("üì¶ Sayfa y√ºklendi, Identity Token ile embed ba≈ülƒ±yor...");

        const container = document.getElementById("mydossier");
        const dossierUrl =
          "https://report.diasteknoloji.com/MicroStrategyLibrary/app/B1AE84B54741CE143087C3B900E29D47/FD3757D7439EC2DC7E1A3692AC22CF89";

        microstrategy.dossier
          .create({
            url: dossierUrl,
            placeholder: container,
            containerHeight: "1000px",
            enableResponsive: true,
            enableCustomAuthentication: true,
            customAuthenticationType:
              microstrategy.dossier.CustomAuthenticationType.IDENTITY_TOKEN,
            getLoginToken: () => {
              console.log("üîê Identity Token g√∂nderiliyor:", window.identityToken);
              return Promise.resolve(window.identityToken);
            },
          })
          .then((dossier) => {
            console.log("‚úÖ Embed i≈ülemi ba≈üarƒ±lƒ±:", dossier);
          })
          .catch((err) => {
            console.error("‚ùå Embed sƒ±rasƒ±nda hata:", err);
          });
      });
    </script>
  </body>
</html>
